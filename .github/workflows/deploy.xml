name: Fetch GitHub Projects

on:
  schedule:
    - cron: '0 0 * * *' # Runs daily at midnight

jobs:
  fetch-projects:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
        
      - name: Fetch GitHub Projects
        env:
          GH_TOKEN: ${{ secrets.GH_TOKEN }}
        run: |
          curl -H "Authorization: token $GH_TOKEN" https://api.github.com/users/lavnishhh/repos > projects.js
          
      - name: Commit & Push changes
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: "Update projects.js"
          commit_options: "-a"
